<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">


<head>
    <link rel="icon" th:href="@{/fe/image/icon.png}" type="image/x-icon">
    <title>Trang chủ ADMIN</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">
    <link rel="shortcut icon" th:href="@{/favicon.ico}">

    <!-- FontAwesome JS-->
    <script defer th:src="@{/assets/plugins/fontawesome/js/all.min.js}"></script>

    <!-- App CSS -->
    <link id="theme-style" rel="stylesheet" th:href="@{/assets/css/portal.css}">

</head>

<body class="app">
<header class="app-header fixed-top">
    <div class="app-header-inner">
        <div class="container-fluid py-2">
            <div class="app-header-content">
                <div class="row justify-content-between align-items-center">

                    <div class="col-auto">
                        <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" th:href="@{/#}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"
                                 role="img">
                                <title>Menu</title>
                                <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10"
                                      stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
                            </svg>
                        </a>
                    </div><!--//col-->
                    <div class="search-mobile-trigger d-sm-none col">
                        <i class="search-mobile-trigger-icon fa-solid fa-magnifying-glass"></i>
                    </div><!--//col-->
                    <div class="app-search-box col">
                        <form class="app-search-form">
                            <input type="text" placeholder="Search..." name="keyword"
                                   class="form-control search-input">
                            <button type="submit" class="btn search-btn btn-primary" value="Search"><i
                                    class="fa-solid fa-magnifying-glass"></i></button>
                        </form>
                    </div><!--//app-search-box-->

                    <div class="app-utilities col-auto">
                        <div class="app-utility-item app-notifications-dropdown dropdown">
                        </div><!--//app-utility-item-->

                            <div class="app-utility-item">
                                <a th:href="@{/index}" class="nav-link"> <p class="d-none d-md-block mb-0">Chuyển đến trang người dùng</p> </a>
                            </div>


                        <div class="app-utility-item app-user-dropdown dropdown">
                            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown"
                               th:href="@{/#}"
                               role="button" aria-expanded="false"><img th:src="@{/assets/images/user.png}"
                                                                        alt="user profile">
                                <span th:text="${#authentication.name}"></span>
                                <!--                                hiển thị tên người đăng nhập-->

                            </a>
                            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
                                <li><a class="dropdown-item" th:href="@{/account.html}">Account</a></li>
                                <li><a class="dropdown-item" th:href="@{/settings.html}">Settings</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" th:href="@{/admin-logout}">Log Out</a></li>
                            </ul>
                        </div><!--//app-user-dropdown-->
                    </div><!--//app-utilities-->
                </div><!--//row-->
            </div><!--//app-header-content-->
        </div><!--//container-fluid-->
    </div><!--//app-header-inner-->
    <div id="app-sidepanel" class="app-sidepanel">
        <div id="sidepanel-drop" class="sidepanel-drop"></div>
        <div class="sidepanel-inner d-flex flex-column">
            <a th:href="@{/#}" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
            <div class="app-branding">
                <a class="app-logo" th:href="@{/admin}"><img class="logo-icon me-2"
                                                             th:src="@{/assets/images/app-logo.svg}"
                                                             alt="logo"><span class="logo-text">ADMIN</span></a>

            </div><!--//app-branding-->

            <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
                <ul class="app-menu list-unstyled accordion" id="menu-accordion">
                    <li class="nav-item">
                        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                        <a class="nav-link" th:href="@{/admin}">
								<span class="nav-icon">
									<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house-door"
                                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd"
                                              d="M7.646 1.146a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5H9.5a.5.5 0 0 1-.5-.5v-4H7v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4h3.5V7.707L8 2.207l-5.5 5.5z"/>
										<path fill-rule="evenodd"
                                              d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
									</svg>
								</span>
                            <span class="nav-link-text">Tổng quan</span>
                        </a><!--//nav-link-->
                    </li><!--//nav-item-->


                    <li class="nav-item has-submenu">
                        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                        <a class="nav-link submenu-toggle active" th:href="@{/#}" data-bs-toggle="collapse"
                           data-bs-target="#submenu-1" aria-expanded="false" aria-controls="submenu-1">
								<span class="nav-icon">
									<!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
									<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-folder"
                                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path
                                                d="M9.828 4a3 3 0 0 1-2.12-.879l-.83-.828A1 1 0 0 0 6.173 2H2.5a1 1 0 0 0-1 .981L1.546 4h-1L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3v1z"/>
										<path fill-rule="evenodd"
                                              d="M13.81 4H2.19a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zM2.19 3A2 2 0 0 0 .198 5.181l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H2.19z"/>
									</svg>
								</span>
                            <span class="nav-link-text">Quản lí</span>
                            <span class="submenu-arrow">
									<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down"
                                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd"
                                              d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
									</svg>
								</span><!--//submenu-arrow-->
                        </a><!--//nav-link-->
                        <div id="submenu-1" class="collapse submenu submenu-1 show" data-bs-parent="#menu-accordion">
                            <!--                            đặt sau class thêm "show" để hiện vị trí hiện tại được trỏ-->
                            <ul class="submenu-list list-unstyled">
                                <li class="submenu-item"><a class="submenu-link active"
                                                            th:href="@{/admin/user}">Quản lí người dùng</a></li>
                                <li class="submenu-item"><a class="submenu-link" th:href="@{/admin/category}">Quản
                                    lí
                                    danh mục</a>
                                </li>
                                <li class="submenu-item"><a class="submenu-link" th:href="@{/admin/product}">Quản
                                    lí sản phẩm</a>
                                </li>
                            </ul>
                        </div>
                    </li><!--//nav-item-->




                </ul><!--//app-menu-->
            </nav><!--//app-nav-->
            <div class="app-sidepanel-footer">
                <nav class="app-nav app-nav-footer">
                    <ul class="app-menu footer-menu list-unstyled">


                        <li class="nav-item">
                            <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
                            <a class="nav-link"
                               th:href="@{/admin-logout}">
									<span class="nav-icon">
										<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-person"
                                             fill="currentColor" xmlns="http://www.w3.org/2000/svg">
											<path fill-rule="evenodd"
                                                  d="M12 1H4a1 1 0 0 0-1 1v10.755S4 11 8 11s5 1.755 5 1.755V2a1 1 0 0 0-1-1zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"/>
											<path fill-rule="evenodd" d="M8 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
										</svg>
									</span>
                                <span class="nav-link-text">ĐĂNG XUẤT</span>
                            </a><!--//nav-link-->
                        </li><!--//nav-item-->
                    </ul><!--//footer-menu-->
                </nav>
            </div><!--//app-sidepanel-footer-->

        </div><!--//sidepanel-inner-->
    </div><!--//app-sidepanel-->
</header><!--//app-header-->

<div class="app-wrapper">
    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">

            <div class="row g-3 mb-4 align-items-center justify-content-between">
                <div class="col-auto">
                    <h1 class="app-page-title mb-0">Danh sách các tài khoản </h1>
                </div>

                <div class="col-auto">
                    <div class="page-utilities">

                    </div><!--//table-utilities-->
                </div><!--//col-auto-->
            </div><!--//row-->

            <div class="tab-content" id="orders-table-tab-content">
                <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
                    <div class="app-card app-card-orders-table shadow-sm mb-5">
                        <div class="app-card-body">
                            <div class="table-responsive">
                                <table class="table app-table-hover mb-0 text-left">
                                    <thead>
                                    <tr>
                                        <th class="cell">ID</th>
                                        <th class="cell">Tên đăng nhập</th>
                                        <th class="cell"
                                            style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap">Mật
                                            khẩu
                                        </th>
                                        <th class="cell">Tên đầy đủ</th>
                                        <th class="cell">Email</th>
                                        <th class="cell">Địa chỉ</th>
                                        <th class="cell">Giới tính</th>
                                        <th class="cell">Điện thoại</th>
                                        <th class="cell">Trạng thái</th>
                                        <th class="cell">Vai trò</th>
                                        <th class="cell"></th>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="user : ${list}">
                                        <td th:text="${user.id}" class="cell"></td>
                                        <td th:text="${user.username}" class="cell"></td>
                                        <td th:text="${user.password.substring(0, 5)+'...'}" class="cell"
                                            style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"></td>
                                        <td th:text="${user.fullName}" class="cell"></td>
                                        <td th:text="${user.email}" class="cell"></td>
                                        <td th:text="${user.address}" class="cell"></td>
                                        <td th:if="${user.gender}" class="cell"><span
                                                class="badge bg-success">Nam</span></td>
                                        <td th:if="${!user.gender}" class="cell"><span
                                                class="badge bg-danger">Nữ</span></td>
                                        <td th:text="${user.telephone}" class="cell"></td>
                                        <td th:if="${user.enabled}" class="cell"><span
                                                class="badge bg-success">Hoạt động</span></td>
                                        <td th:if="${!user.enabled}" class="cell"><span
                                                class="badge bg-danger">Khóa</span></td>
                                        <td class="cell">
                                                    <span th:each="userRole : ${user.userRoles}">
                                                        <span th:text="${userRole.role.name}"></span>
                                                    </span>
                                            <span th:if="${user.userRoles == null || user.userRoles.isEmpty()}">
                                                       USER
                                            </span>
                                        </td>

                                        <td>
                                            <!--                          onclick bắt phải return confirm thì khi ấn hủy mới hủy được (đặt dấu ; ở cuối, giống dạng true false lựa chọn)-->
                                            <a th:href="@{/admin/user/delete/{id}(id = ${user.id})}"
                                               onclick="return confirm('Xóa tài khoản này ?');">
                                                <button type="submit" class="btn app-btn-secondary"
                                                        style="background-color: #dc3545"
                                                >Xóa
                                                </button>
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div><!--//table-responsive-->

                        </div><!--//app-card-body-->
                    </div><!--//app-card-->


                </div><!--//tab-pane-->


            </div><!--//tab-content-->


        </div><!--//container-fluid-->
    </div><!--//app-content-->


    <footer class="app-footer">
        <div class="container text-center py-3">
            <nav class="app-pagination">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled' : ''">
                        <a class="page-link"
                           th:href="@{${keyword != null && keyword != '' ? '?keyword=' + keyword+'&':'?'}+'pageNo='+${currentPage+(-1)}}">Previous</a>
                    </li>
                    <!--                    vì danh sách nếu không có keyword trùng dữ liệu thì tổng số trang sẽ bằng 0 nên ta đặt thêm điuều kiện nếu tổng số trang mà nhỏ hơn bằng 0 thì bằng 1-->
                    <li th:each="i:${#numbers.sequence(1,(totalPage > 0 ? totalPage : 1))}" class="page-item"
                        th:classappend="${currentPage==i}?'active':''">
                        <a class="page-link"
                           th:href="@{${keyword != null && keyword != '' ? '?keyword=' + keyword+'&':'?'}+'pageNo='+${i}}"
                           th:text="${i}"></a>
                    </li>
                    <li class="page-item"
                        th:classappend="${currentPage == totalPage || totalPage < 1} ? 'disabled' : ''">
                        <a class="page-link"
                           th:href="@{${keyword != null && keyword != '' ? '?keyword=' + keyword+'&':'?'}+'pageNo='+${currentPage+1}}">Next</a>
                    </li>
                </ul>
            </nav>
            <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
        </div>
    </footer><!--//app-footer-->

</div><!--//app-wrapper-->


<!-- Javascript -->
<script th:src="@{/assets/plugins/popper.min.js}"></script>
<script th:src="@{/assets/plugins/bootstrap/js/bootstrap.min.js}"></script>

<!-- Charts JS -->
<script th:src="@{/assets/plugins/chart.js/chart.min.js}"></script>
<script th:src="@{/assets/js/index-charts.js}"></script>

<!-- Page Specific JS -->
<script th:src="@{/assets/js/app.js}"></script>

</body>

</html>